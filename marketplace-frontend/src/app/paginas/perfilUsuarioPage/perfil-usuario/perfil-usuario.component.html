<app-navbar></app-navbar>
<div class="flex flex-col min-h-screen bg-black">
  <div class="flex flex-1">
    <aside class="w-64 bg-gray-950 text-white p-6 font-primario shadow-2xl flex flex-col justify-between rounded-tr-3xl rounded-br-3xl">
      <div>
        <h2 class="text-xl font-semibold mb-6 border-b border-gray-700 pb-3">Panel de Usuario</h2>
        <ul class="space-y-3">
          <li class="flex items-center gap-3 p-3 hover:bg-gray-800 rounded-xl cursor-pointer transition">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7h18M3 12h18M3 17h18"/>
            </svg>
            <span>Mis productos</span>
          </li>
          <li class="flex items-center gap-3 p-3 hover:bg-gray-800 rounded-xl cursor-pointer transition">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span>Vendidos</span>
          </li>
          <li class="flex items-center gap-3 p-3 hover:bg-gray-800 rounded-xl cursor-pointer transition">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V7a2 2 0 00-2-2H6a2 2 0 00-2 2v6m16 0l-8 5-8-5" />
            </svg>
            <span>Comprados</span>
          </li>
        </ul>
      </div>
      <div class="pt-6 border-t border-gray-700 mt-6">
        <button 
          class="w-full flex items-center gap-3 bg-red-600 hover:bg-red-800 text-white px-4 py-2 rounded-xl transition"
          (click)="logout()"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1m0-10V5m-6 1v12" />
          </svg>
          Cerrar Sesión
        </button>
      </div>
    </aside>
    <!-- Divider -->
    <div class="w-1 bg-primario"></div>
    <!-- MAIN -->
    <main class="flex-1 p-6 bg-black">
      <h1 class="text-2xl font-primario text-white">Mis productos</h1>
      <button class="bg-primario text-black font-primario py-2 mt-4 px-4 rounded-xl hover:bg-yellow-600 cursor-pointer" routerLink="/añadir-formulario">
        + Añadir Producto
      </button>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-5">
        @for (producto of productos; track producto.productoId) {
          <div class="bg-gray-900 text-white w-full rounded-2xl shadow-lg overflow-hidden transition-transform hover:-translate-y-1 hover:shadow-xl">
            <div class="flex p-5">
              <!-- Imagen -->
              @if (producto?.imagenBase64) {
                <img 
                  [src]="'data:image/jpeg;base64,' + producto?.imagenBase64" 
                  alt="Producto" 
                  class="w-40 h-40 object-contain rounded-xl shadow-sm group-hover:scale-105 transition-transform duration-300"
                />
              } @else {
                <img 
                  src="OIP.jpg"
                  alt="Sin imagen"
                  class="w-40 h-40 object-contain rounded-xl shadow-sm group-hover:scale-105 transition-transform duration-300"
                />
              }
              <!-- Info -->
              <div class="ml-6 flex flex-col justify-between flex-grow font-primario">
                <div>
                  <h2 class="text-xl font-semibold mb-1">{{ producto?.nombre }}</h2>
                  <p class="text-sm text-gray-300 mb-1">Descripción: {{ producto?.descripcion }}</p>
                  <p class="text-sm text-yellow-400 mb-1">Precio: <span class="font-bold">{{ producto?.precio }} Bs</span></p>
                  <p class="text-sm text-gray-300">Stock: <span class="font-semibold">{{ producto?.stock }}</span></p>
                </div>
              </div>
              <!-- Botones -->
              <div class="flex flex-col justify-between ml-4">
                <button class="bg-blue-600 hover:bg-blue-800 text-white p-2 rounded-full shadow-md transition duration-200 cursor-pointer" title="Editar producto" (click)="editarProducto(producto)">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536M9 13l6-6M4 20h4l10-10" />
                  </svg>
                </button>
                <button class="bg-red-600 hover:bg-red-800 text-white p-2 rounded-full shadow-md mt-4 transition duration-200 cursor-pointer" title="Eliminar producto" (click)="mostrarModal(producto.productoId)">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                  </svg>
                </button>
              </div>
            </div>
          </div>
        }
      </div>
    </main>
  </div>
  <app-footer></app-footer>
</div>

@if(mostrar_modal){

  <div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-lg w-full max-w-md p-6">
      <h2 class="text-xl font-primario mb-4">Eliminar Producto</h2>
      <p class="mb-4">¿Estas seguro que deseas eliminar este producto?</p>
      <div class="flex justify-end">
        <button class="px-4 py-2 mr-2 bg-primario text-white rounded hover:bg-blue-700" (click)="eliminarProducto(productoAeliminar)">Confirmar</button>
        <button class="px-4 py-2 bg-black text-white rounded hover:bg-blue-700" (click)="cerrarModal()">Cerrar</button>
      </div>
    </div>
  </div>
}